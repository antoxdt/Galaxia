
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Feliz San ValentÃ­n</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- ===== INTRO CINEMATOGRÃFICA ===== -->
<div id="intro">
<h1 class="introTexto">Para alguien muy especialâ€¦</h1>
</div>

<h1 id="titulo">Feliz San ValentÃ­n Polola ğŸ’˜</h1>

<button id="botonSorpresa">PÃ­came</button>

<audio id="musica" src="Chocolate.mp3" loop></audio>

<!-- CARTA -->
<div id="pantallaCarta" class="cartaBody oculto">

<div class="carta">

<h2>De mi, pa ti ğŸ«µğŸŒ·</h2>

<p>
Dos, dos meses ya woow ğŸ®â¤ï¸ me encanta cÃ³mo el tiempo corre cuando estamos juntos âŒ›
y aun asÃ­ siento que nunca es suficiente. Si pudiera, repetirÃ­a esos ratos contigo
una y otra vez ğŸ”, tanto que me atreverÃ­a a decirte que estos dos meses entran dentro
de los mejores dÃ­as en mi vida.

Muak, me gustas â¤ï¸, me gusta tu forma de ser. Eres calma mientras voy por el mundo
siendo un ser tan desesperado ğŸ˜¾, pero hey mÃ¡gicamente tÃº ğŸ«µ logras sacarme una
sonrisa ğŸ§›ğŸ˜

No sÃ© cÃ³mo explicarlo mejor, pero quererte se siente natural, ligero, bonito âœ¨
y si este es solo el comienzo, no puedo esperar a todo lo que viene ğŸ«‚

<br><br>

<b>Te amuuu mi Diosa ğŸŒ·</b>
</p>

<button id="volver" class="volver">
 Volver al universo 
</button>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>

// ===== INTRO =====
setTimeout(()=>{
document.getElementById("intro").classList.add("introFade");
}, 2500);

setTimeout(()=>{
document.getElementById("intro").style.display="none";
}, 3500);

// ===== AUDIO =====
const musica = document.getElementById("musica");
const ctx = new (window.AudioContext || window.webkitAudioContext)();
const src = ctx.createMediaElementSource(musica);
const analyser = ctx.createAnalyser();

src.connect(analyser);
analyser.connect(ctx.destination);

const dataArray = new Uint8Array(analyser.frequencyBinCount);

function fadeInAudio(){
musica.volume=0;
musica.play().catch(()=>{});
let v=0;
let fade=setInterval(()=>{
v+=0.05;
musica.volume=Math.min(v,1);
if(v>=1) clearInterval(fade);
},100);
}

// ===== BOTONES =====
const boton=document.getElementById("botonSorpresa");
const carta=document.getElementById("pantallaCarta");

boton.onclick=()=>{
ctx.resume();
fadeInAudio();
carta.classList.remove("oculto");
carta.classList.add("fadeIn");
};

document.getElementById("volver").onclick=()=>{
carta.classList.add("fadeOut");
setTimeout(()=>{
carta.classList.add("oculto");
carta.classList.remove("fadeOut");
},600);
};

// ===== ESCENA =====
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,1000);
camera.position.z=120;

// ===== ILUMINACIÃ“N DINÃMICA =====

// luz ambiental suave
const ambientLight = new THREE.AmbientLight(0x404060, 1.2);
scene.add(ambientLight);

// luz puntual que reacciona a la mÃºsica
const pulseLight = new THREE.PointLight(0xa78bfa, 2, 500);
pulseLight.position.set(0, 0, 80);
scene.add(pulseLight);


const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.domElement.style.position="fixed";
renderer.domElement.style.zIndex="0";
document.body.appendChild(renderer.domElement);

// ===== ESTRELLAS =====
const starGeo=new THREE.BufferGeometry();
let pos=[];

for(let i=0;i<4000;i++){
pos.push((Math.random()-0.5)*600,(Math.random()-0.5)*300,(Math.random()-0.5)*600);
}

starGeo.setAttribute("position",new THREE.Float32BufferAttribute(pos,3));

const stars=new THREE.Points(
starGeo,
new THREE.PointsMaterial({color:0x8b5cf6,size:1})
);

scene.add(stars);

// ===== PARTÃCULAS REACTIVAS =====
const reactGeo=new THREE.BufferGeometry();
let rpos=[];

for(let i=0;i<800;i++){
rpos.push((Math.random()-0.5)*400,(Math.random()-0.5)*200,(Math.random()-0.5)*400);
}

reactGeo.setAttribute("position",new THREE.Float32BufferAttribute(rpos,3));

const react=new THREE.Points(
reactGeo,
new THREE.PointsMaterial({color:0xffffff,size:1})
);

scene.add(react);

// ===== ANIMACIÃ“N =====
let time=0;

function animate(){
requestAnimationFrame(animate);

analyser.getByteFrequencyData(dataArray);
let avg=dataArray.reduce((a,b)=>a+b)/dataArray.length;

react.material.size=1+avg/80;

stars.rotation.y+=0.001;
camera.position.x=Math.sin(time)*10;
camera.lookAt(0,0,0);

time+=0.003;

renderer.render(scene,camera);
}

animate();

window.addEventListener("resize",()=>{
camera.aspect=innerWidth/innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(innerWidth,innerHeight);
});

</script>

</body>
</html>


